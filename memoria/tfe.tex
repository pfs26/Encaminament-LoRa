\documentclass{tfgitic}[2024/07/01]

% Aqui carregueu packages complementaris que necessiteu
\usepackage{biblatex}
% \usepackage[table,xcdraw]{xcolor}
\usepackage{colortbl}
\usepackage{booktabs}
\usepackage{hhline}
\usepackage{caption}

\renewcommand{\figureautorefname}{figura}
\renewcommand{\tableautorefname}{taula}
\renewcommand{\sectionautorefname}{secció}
\renewcommand{\subsectionautorefname}{apartat}
\renewcommand{\subsubsectionautorefname}{subapartat}
\renewcommand{\chapterautorefname}{capítol}


% Indica quines bd bibliografiques usarem
\addbibresource{tfe.bib}

% \title{Disseny d’un protocol LoRa amb encaminament estàtic per aplicacions de monitoratge}
\title{Disseny d’un protocol LoRa amb encaminament estàtic per aplicacions de monitoratge}
\subtitle{Aplicació en xarxes de baix consum mitjançant sincronització temporal}
% \subtitle{Adaptació per a escenaris de baix consum mitjançant sincronització temporal}

% L'autor del treball. Admet gènere (vegeu 9.2 del manual) fent \author[f]{}
\author{Pol Flotats Sabata}

% La direcció. Un treball ordinari te un o excepcionalment dos directors.
% admet gènerer i número (vegeu 9.2 del manual)
\advisor{Jordi Bonet Dalmau i Arnau Arumi Casanovas}

% Si el treball es fa sota un conveni de pràctiques (modalitat empresa)
% llavors el director (advisor) és la persona de la empresa que
% dirigeix el treball i, a més, hi ha un professor que fa de tutor (counselor).
% En aquest cas també es consigna l'empresa (company)
% \counselor admet gènere (vegeu 9.2 del manual)
%
% \counselor{}
% \company{}

% Els àmbits temàtics en que es classifica el treball. Pregunteu al
% director.
\topics{}

% Si voleu dedicatòria descomenteu
%\dedication{}

% Si voleu agraïments descomenteu
%\begin{acknowledgments}
%\end{acknowledgments}


\begin{resum}
\end{resum}

\begin{abstract}
\end{abstract}




\begin{document}

% Si feu servir apèndixs, descomenteu
%\part{Memòria}

\chapter{Introducció}
\section{Objectius}
\section{Limitacions i abast del treball}
\section{Estructura de la memòria}

\chapter{Antecedents}
\section{Protocols de comunicació: capes i modularitat}
Un protocol de comunicació defineix com dos o més dispositius d'una xarxa poden intercanviar informació. Ho fa mitjançant regles i normes que determinen la sintaxi ---format dels missatges---, la semàntica ---el seu significat---, i mecanismes de detecció i correcció d'errors.

Per tal que es pugui establir una comunicació, és necessari que els dispositius involucrats implementin el mateix protocol. Per facilitar-ho, es defineixen estàndards tècnics, publicats per organitzacions com l'\acro{iso} o l'\acro{ieee}, permetent que els fabricants puguin dissenyar dispositius compatibles. Un exemple de protocol estandaritzat és \acro{http}, amb el seu detall consultable a \cite{fielding_hypertext_2014}.

Per facilitar el disseny i implementació dels protocols, sovint es descomposen en protocols més simples. Aquests es poden agrupar en capes, on cada capa s'encarrega d'una part específica del procés de comunicació. El resultat és el que es coneix com una pila de protocols. 
En aquests dissenys, cada capa depèn de les capes inferiors per realitzar les seves funcions, i proporciona serveis a les capes superiors. El disseny i verificació de cada capa es pot fer de forma independent, i ofereixen la possibilitat d'implementar diferents protocols en cada capa, sempre que es mantingui la interfície definida entre elles.

Un dels models més coneguts és el model \acro{osi}, definit per set capes. Tot i no ser utilitzat en sistemes reals, és de gran utilitat en entorns acadèmics per comprendre la divisió per capes. Per a més informació, es pot consultar \cite{noauthor_isoiec_1994}.

En sistemes reals, el model més utilitzat és el model \acro{tcp/ip}, que estableix les bases d'Internet. Està format per quatre capes:
\begin{enumerate}
    \item \emph{Enllaç}. És la capa de més baix nivell. S'encarrega de la comunicació entre dispositius d'una mateixa xarxa ---és a dir, es poden comunicar directament---, i de la detecció i correció d'errors produits en la comunicació. També gestiona l'accés al medi físic per on es transmeten les dades, que sovint és compartit amb altres dispositius.
    \item \emph{Xarxa}. Gestiona la comunicació entre dispositius que es troben en xarxes diferents i, per tant, no es poden comunicar directament. Per fer-ho, s'utilitzen dispositius intermedis, coneguts com a encaminadors (\est{routers}), que determinen la ruta més eficient per fer arribar les dades al seu destí.
    \item \emph{Transport}. Defineix la connexió d'extrem a extrem entre els dispositius origen i destí i, si és necessari, que la transmissió sigui fiable. Els protocols d'aquesta capa poden oferir mecanismes com l'ordenació de missatges, l'eliminació de missatges duplicats i la gestió de congestió. Els dos protocols més coneguts d'aquesta capa són \acro{tcp}, que garanteix la transmissió fiable de dades mitjançant confirmacions i retransmissions, i \acro{udp}, que no garanteix fiabilitat, però és més eficient per aplicacions en temps real com el contingut en estríming o videjocs.
    \item \emph{Aplicació}. És la capa més alta i propera a l'usuari final. Defineix els protocols que utilitzen les aplicacions per comunicar-se a través de la xarxa, com ara \acro{http}, utilitzat per a la navegació web, o protocols de suport, com ara \acro{dns}, per a la resolució de noms de domini.
\end{enumerate}
Per a l'estàndard complet i més detall, es pot consultar \cite{braden_requirements_1989}. 

% \subsection{Referència al model TCP/IP}
\section{Tecnologia LoRa i LoRaWAN}
El nom de \emph{LoRa} prové de l'anglès \est{Long Range}. És una tecnologia de comunicació sense fils, de llarg abast, i de baix consum, fent que sigui especialment útil per a aplicacions d'Internet de les Coses (\acro{iot}). Va ser desenvolupada per \emph{Cycleo}, que va ser adquirida per \emph{Semtech} el 2012.

Per assolir una comunicació de llarg abast, LoRa utilitza modulació de \emph{chirp spread spectrum} (\acro{css}), que permet una comunicació robusta i fiable en entorns amb interferències.
La tecnologia LoRa utilitza modulació de \emph{chirp spread spectrum} (\acro{css}), el qual utilitza polsos de freqüència variable per transmetre dades, utilitzant tot l'ample de banda disponible. Aquest fet permet una comunicació robusta i fiable en entorns amb interferències i soroll, i és resistent a l'efecte \emph{Doppler}.

Consta de diversos paràmetres que es poden ajustar per adaptar la comunicació a diferents necessitats:
\begin{itemize}
    \item \emph{Ample de banda}. És l'ample de banda del canal de transmissió, sovint de \SI{125}{\kHz}, però també pot ser de \SI{250}{\kHz} o \SI{500}{\kHz}. Un ample de banda més gran permet una major velocitat de transmissió, però redueix la sensibilitat de recepció i, per tant, el rang de comunicació.
\end{itemize}

Així, podríem enumerar les següents característiques:
\begin{itemize}
    \item \emph{Llarg abast}. La tecnologia LoRa permet comunicacions de fins a 15 km en entorns rurals i fins a 5 km en entorns urbans \cite{noauthor_lora_2024}.
    \item \emph{Baix consum}. En no estar pensat per transmetre grans quantitats de dades, ni de forma recurrent (poques vegades al dia), el consum energètic és molt baix. Això permet que els dispositius funcionin amb bateries durant anys. 
    \item \emph{Baixa velocitat de transmissió}. En no estar pensat per transmetre grans quantitats de dades, la velocitat de transmissió és baixa, amb un màxim de 50 kbps.
    \item \emph{Fiabilitat}. Gràcies a la modulació \acro{css}, es permet resistir a interferències i al soroll. Això també ajuda a augmentar el rang de comunicació, o a disminuir el consum energètic, ja que permet utilitzar potències de transmissió més baixes sense perdre fiabilitat.
    \item \emph{Bandes ISM}. Utilitza bandes \acro{ism}, lliures de llicència, com la banda de 868 MHz a Europa o la de 915 MHz als Estats Units. Això permet que qualsevol persona pugui utilitzar la tecnologia sense necessitat d'obtenir una llicència. Malgrat això, existeixen limitacions legals, com la potència màxima de transmissió o la quantitat de dades que es poden transmetre en un període de temps determinat. Per a més informació, es pot consultar \ref{subsec:limitacions_legals}.
\end{itemize}

% \subsection{Limitacions legals i d’ús (EU868, TTN)}
\section{Treballs relacionats}
% \subsection{Meshtastic, LoRaMesher i altres solucions}
% \subsection{Limitacions en consum i compatibilitat}

\chapter{Desenvolupament del protocol de comunicació}
\section{Disseny per capes}
\subsection{Capa física}
\subsection{Accés al medi}
\subsection{Encaminament estàtic}
\subsection{Capa de transport}
\subsection{Capa d’aplicació}
\section{Implementació}
\subsection{Arquitectura del codi i comunicació entre capes}
\subsection{Biblioteques i entorn de desenvolupament}
\subsection{Proves i validació funcional}

\chapter{Adaptació a entorns de baix consum}
\section{Descripció de l’escenari: xarxa lineal de sensors}
\section{Limitacions del protocol sense optimitzacions energètiques}
% \section{Estratègies de sincronització i activació temporal}
\section{Estratègies de sincronització}
\subsection{Sincronització explícita}
\subsection{Sincronització implícita}
% \subsection{Avantatges i inconvenients de cada enfocament}
% \subsection{Compromisos entre consum i generalitat del protocol}

\chapter{Conclusions}
% \section{Resultats assolits}
% \section{Limitacions del disseny final}
% \section{Punts clau de millora}

\chapter{Treball futur}
% \section{Suport a topologies més complexes}
% \section{Optimització del consum energètic}
% \section{Integració amb LoRaWAN o altres protocols}


% \chapter{Introducció}
% \label{chap:intro}
% \section{Objectius}
% \label{sec:objectius}
% \section{Limitacions del treball}
% \section{Organització de la memòria}

% \chapter{Antecedents}
% \section{Introducció a LoRa i LoRaWAN}
% % Mencionar limitacions legals de TTN i EU868
% \section{Sobre els protocols de comunicació}
% \section{Treballs relacionats}
% % meshtastic -> xarxa mesh però sense baix consum, broadcasts podent afectar communicació, etc.
% % tampoc permeten compatibilitat amb lorawan
% % \section{Solucions existents}
% % loramesher -> sense broadcast, però requereixen descobriment de rutes previs
% % Cap dels dos permeten baix consum i modes de deep sleep

% % Aqui van els capitols especifics del treball
% \chapter{Disseny del protocol de comunicació} % no es veu afectat per material
% \section{Medi físic}
% \subsection{LoRa}
% \subsection{LoRaWAN}
% % Uplinks es faran amb ACK o no depenent de define en compilar
% % fet així per evitar que s'hagin de fer molts downlinks per ACKs
% % ja que TTN limita (fair use policy) a 10 downlinks per dia
% \section{Accés al medi}
% % Mencionar que seria aquí on es faria limitació d'accés al medi
% % Podent afegir un últim estat que "esperi" un temps fins següent TX
% % Parlar llavors sobre les possibles limitacions que això podria comportar
% % (per exemple si es limiten ACKs de capa MAC, o no es limiten, o es limiten ACKs de transport...)
% \section{Encaminament}
% \section{Transport}
% \section{Aplicació}
% \chapter{Implementació del protocol}
% \section{Estructura}
% \subsection{Organització del codi}
% % S'ha implementat seguint model de capes, on cada capa és un mòdul.
% % Cada capa inferior notifica a la superior a través de callbacks, 
% % i cada capa superior notifica a la inferior a través de mètodes.
% % S'ha intentat que no hi hagi mètodes bloquejants, amb excepció dels 
% % mètodes "finals" com transmissió.
% \subsection{Biblioteques i entorn de desenvolupament}
% % platformio + radiolib (comentar radiohead + lmic)
% \section{Protocol de comunicació}
% \subsection{Capa física}
% \subsection{Accés al medi}
% \subsection{Encaminament}
% \subsection{Transport}
% \subsection{Aplicació}
% \section{Validació del funcionament i resultats}

% \chapter{Aplicació en entorns de baix consum}
% % explicar avantatges i inconvenients d'utilitzar
% % el protocol de sincronització genèric aqui. També s'hauria d'explicar el seu disseny

% % quines son totes les opcions plantejades, avantatges i inconvenients, i perquè
% \section{Descripció de la situació}
% % Com és la xarxa, i què es vol aconseguir

% % Per a cada iteració: avantatges i inconvenients. Què implicaria afegir nous nodes?
% % Limitacions de temps? memòria?

% \chapter{Conclusions}

% \chapter{Treball futur}

% https://www.latex-tables.com/
% configurar amb opció de SCALE
\begin{figure}
    \centering
    \resizebox{\linewidth}{!}{%
        \begin{tabular}{l||cccccccccccccccccc} 
            \hhline{~|t|~~~~~~~----~~~~~~~}
            \textbf{N1} &                          &                            &                            &                            &                            &                            & \multicolumn{1}{c|}{}      & \multicolumn{1}{c|}{RX2:9} & \multicolumn{1}{c|}{TX1:9} & \multicolumn{1}{c|}{{\cellcolor[rgb]{0.753,0.749,0.737}}RXG} & \multicolumn{1}{c|}{{\cellcolor[rgb]{0.753,0.749,0.737}}TXG} &                                                              &                                                              &                          &                          &                          &                          &                           \\ 
            \hhline{~||~~~~~~------~~~~~~}
            \textbf{N2} &                          &                            &                            &                            &                            & \multicolumn{1}{c|}{}      & \multicolumn{1}{c|}{RX3:9} & \multicolumn{1}{c|}{TX2:9} &                            & \multicolumn{1}{c|}{}                                        & \multicolumn{1}{c|}{{\cellcolor[rgb]{0.753,0.749,0.737}}RXG} & \multicolumn{1}{c|}{{\cellcolor[rgb]{0.753,0.749,0.737}}TXG} &                                                              &                          &                          &                          &                          &                           \\ 
            \hhline{~||~~~~~---~~---~~~~~}
            \textbf{N3} &                          &                            &                            &                            & \multicolumn{1}{c|}{}      & \multicolumn{1}{c|}{RX4:9} & \multicolumn{1}{c|}{TX3:9} &                            &                            &                                                              & \multicolumn{1}{c|}{}                                        & \multicolumn{1}{c|}{{\cellcolor[rgb]{0.753,0.749,0.737}}RXG} & \multicolumn{1}{c|}{{\cellcolor[rgb]{0.753,0.749,0.737}}TXG} &                          &                          &                          &                          &                           \\ 
            \hhline{~||~~~~---~~~~---~~~~}
            \textbf{N4} &                          &                            &                            & \multicolumn{1}{c|}{}      & \multicolumn{1}{c|}{RX5:9} & \multicolumn{1}{c|}{TX4:9} &                            &                            &                            &                                                              &                                                              & \multicolumn{1}{c|}{}                                        & \multicolumn{1}{c|}{{\cellcolor[rgb]{0.753,0.749,0.737}}RXG} & \multicolumn{1}{c|}{TXG} &                          &                          &                          &                           \\ 
            \cline{5-7}\cline{14-16}
            \textbf{N5} &                          &                            & \multicolumn{1}{c|}{}      & \multicolumn{1}{c|}{RX6:9} & \multicolumn{1}{c|}{TX5:9} &                            &                            &                            &                            &                                                              &                                                              &                                                              & \multicolumn{1}{c|}{}                                        & \multicolumn{1}{c|}{RXG} & \multicolumn{1}{c|}{TXG} &                          &                          &                           \\ 
            \cline{4-6}\cline{15-17}
            \textbf{N6} &                          & \multicolumn{1}{c|}{}      & \multicolumn{1}{c|}{RX7:9} & \multicolumn{1}{c|}{TX6:9} &                            &                            &                            &                            &                            &                                                              &                                                              &                                                              &                                                              & \multicolumn{1}{c|}{}    & \multicolumn{1}{c|}{RXG} & \multicolumn{1}{c|}{TXG} &                          &                           \\ 
            \cline{3-5}\cline{16-18}
            \textbf{N7} & \multicolumn{1}{c|}{}    & \multicolumn{1}{c|}{RX8:9} & \multicolumn{1}{c|}{TX7:9} &                            &                            &                            &                            &                            &                            &                                                              &                                                              &                                                              &                                                              &                          & \multicolumn{1}{c|}{}    & \multicolumn{1}{c|}{RXG} & \multicolumn{1}{c|}{TXG} &                           \\ 
            \cline{2-4}\cline{17-19}
            \textbf{N8} & \multicolumn{1}{c|}{RX9} & \multicolumn{1}{c|}{TX8:9} &                            &                            &                            &                            &                            &                            &                            &                                                              &                                                              &                                                              &                                                              &                          &                          & \multicolumn{1}{c|}{}    & \multicolumn{1}{c|}{RXG} & \multicolumn{1}{c|}{TXG}  \\ 
            \cline{2-3}\cline{18-19}
            \textcolor[rgb]{0.1,1,0.2}{\textbf{N9}} & \multicolumn{1}{c|}{TX9} &                            &                            &                            &                            &                            &                            &                            &                            &                                                              &                                                              &                                                              &                                                              &                          &                          &                          & \multicolumn{1}{c|}{}    & \multicolumn{1}{c|}{RXG}  \\
            \cline{2-2}\cline{19-19}
        \end{tabular}
    }
    \caption{Model sense missatge de sincronització, amb dades acumulatives}
    \label{fig:noSyncAcumulatiu}
\end{figure}

\autoref{chap:intro}
\autoref{sec:objectius}
\autoref{tab:noSyncAcumulatiu}

\listoftables
\listoffigures

\printbibliography


% Si feu servir apèndixs, descomenteu
% (també la  \part del principi del document)
%\appendix
%\part{Apèndixs}
%\chapter{Un apèndix}


\end{document}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% LaTeX-biblatex-use-Biber: t
%%% End:
